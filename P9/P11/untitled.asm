ORG 00H
LJMP START
ORG 0BH 
LJMP T0ISR 

START: 
MOV P2, #0 
MOV IE, #82H 
MOV TMOD, #02H 
MOV TH0, #200
MOV TL0, #200 
SETB TR0 

MAIN_LOOP

SJMP $




T0ISR: 

MOV A, P1 
CPL A 
MOV B, #10 
DIV AB 
SWAP A ; MOVE TENS TO UPPER 4 BITS 

SETB P3.1 
MOV P2, A 
CALL DELAY

ORL A, B 
MOV P2, A 
CALL DELAY 

EXIT_ISR:
RETI 


DELAY: 
MOV R2, #25
L1:MOV R1, #20
DJNZ R1, $
DJNZ R2, L1 
RET 


