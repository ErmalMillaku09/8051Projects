ORG 00H 
LJMP START

ORG 100H 

START: 
MOV P2, #0

MAIN_LOOP:
MOV A, P1 
ANL A, #07H 
CJNE A, #07H, BUTTON_PRESSED
MOV P2, #0
SJMP MAIN_LOOP

BUTTON_PRESSED: 
MOV R0, A 
MOV R1, #0 ; BUTTON COUNTER

JB ACC.0, SKIP1
INC R1 
SKIP1: 
	JB ACC.1, SKIP2
	INC R1 
SKIP2: JB ACC.2, SKIP3 
	INC R1
SKIP3: 
	CJNE R1, #1, MULTIPLE
	JMP LED_CONTROL 
MULTIPLE: MOV P2, #0 
	 SETB P2.3 
	 MOV R3, P1 
	 CJNE R3, #0FFH, $ 

LED_CONTROL: 
CLR P2.3 
MOV A, R0 

CPL A 
ANL A, #07H 
MOV P2, A 
MOV A, #0 
JMP MAIN_LOOP